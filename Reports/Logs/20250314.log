2025-03-14 16:24:15 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:24:15 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:24:15 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:24:15 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:24:15 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:24:15 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:24:15 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:24:15 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:24:15 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:24:15 | INFO     | conftest             | Launching browser
2025-03-14 16:24:17 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:24:17 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:24:18 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:24:18 | ERROR    | conftest             | Test FAILED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:24:18 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None}), departure_airport = 'LHE', arrival_airport = 'JFK', adults = 2, children = 1, infants = 0
cabin = 'Business'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
>       rt = RoundTrip(page)

tests/test_Round_trip.py:7: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x106d7d160>, page = <Page url='about:blank'>

    def __init__(self, page: Page):
        super().__init__(page)
>       self.PlaywrightHelper = PlaywrightHelper(page)
E       TypeError: PlaywrightHelper() takes no arguments

pages/Round_Trip.py:17: TypeError
2025-03-14 16:24:18 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:24:18 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[LHE-JFK-2-1-0-Business]_20250314_1624.png
2025-03-14 16:24:18 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:24:18 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:24:18 | INFO     | conftest             | Closing page
2025-03-14 16:24:18 | INFO     | conftest             | Closing browser
2025-03-14 16:24:19 | INFO     | conftest             | Launching browser
2025-03-14 16:24:20 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:24:20 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:24:20 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:24:20 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:24:20 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None}), departure_airport = 'KHI', arrival_airport = 'IST', adults = 1, children = 0, infants = 0
cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
>       rt = RoundTrip(page)

tests/test_Round_trip.py:7: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x106db6990>, page = <Page url='about:blank'>

    def __init__(self, page: Page):
        super().__init__(page)
>       self.PlaywrightHelper = PlaywrightHelper(page)
E       TypeError: PlaywrightHelper() takes no arguments

pages/Round_Trip.py:17: TypeError
2025-03-14 16:24:20 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:24:20 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1624.png
2025-03-14 16:24:21 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:24:21 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:24:21 | INFO     | conftest             | Closing page
2025-03-14 16:24:21 | INFO     | conftest             | Closing browser
2025-03-14 16:24:21 | INFO     | conftest             | Launching browser
2025-03-14 16:24:22 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:24:22 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:24:23 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:24:23 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:24:23 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:24:23 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:13: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:24:23 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:24:23 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1624.png
2025-03-14 16:24:23 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:24:23 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:24:23 | INFO     | conftest             | Closing page
2025-03-14 16:24:23 | INFO     | conftest             | Closing browser
2025-03-14 16:24:23 | INFO     | conftest             | Launching browser
2025-03-14 16:24:24 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:24:24 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:24:25 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:24:25 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:24:25 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:24:25 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:24:25 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:24:25 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1624.png
2025-03-14 16:24:25 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:24:25 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:24:25 | INFO     | conftest             | Closing page
2025-03-14 16:24:25 | INFO     | conftest             | Closing browser
2025-03-14 16:24:26 | INFO     | conftest             | Launching browser
2025-03-14 16:24:27 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:24:27 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:24:28 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:24:28 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:24:28 | ERROR    | conftest             | Test FAILED: test_flight_stops
2025-03-14 16:24:28 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_stops(page_tuple):
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:24:28 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_stops
2025-03-14 16:24:28 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_stops_20250314_1624.png
2025-03-14 16:24:28 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:24:28 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:24:28 | INFO     | conftest             | Closing page
2025-03-14 16:24:28 | INFO     | conftest             | Closing browser
2025-03-14 16:25:30 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:25:30 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:25:30 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:25:30 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:25:33 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:25:33 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:25:33 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:25:33 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:25:33 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:25:33 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:25:33 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:25:33 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:25:33 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:25:33 | INFO     | conftest             | Launching browser
2025-03-14 16:25:34 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:25:34 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:25:35 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:25:35 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:25:45 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:25:45 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:25:45 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:25:45 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:25:45 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:25:46 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:25:46 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:25:46 | INFO     | RoundTrip            | Selecting departure airport: LHE
2025-03-14 16:25:46 | INFO     | RoundTrip            | Setting and verifying Departure airport: LHE
2025-03-14 16:25:46 | INFO     | RoundTrip            | Departure airport set to: LHE
2025-03-14 16:25:47 | INFO     | RoundTrip            | Selecting airport from options: LHE
2025-03-14 16:25:48 | INFO     | RoundTrip            | Found 13 airport options
2025-03-14 16:25:48 | INFO     | RoundTrip            | Found matching airport: AirportAllama Iqbal International AirportLHE
2025-03-14 16:25:48 | INFO     | RoundTrip            | Selected Departure airport: AirportAllama Iqbal International AirportLHE (Code: LHE)
2025-03-14 16:25:48 | INFO     | RoundTrip            | Actual Departure airport: Lahore (LHE) (Code: LHE)
2025-03-14 16:25:48 | INFO     | RoundTrip            | Departure airport selected: LHE
2025-03-14 16:25:48 | INFO     | RoundTrip            | Selecting arrival airport: JFK
2025-03-14 16:25:48 | INFO     | RoundTrip            | Setting and verifying Arrival airport: JFK
2025-03-14 16:25:48 | INFO     | RoundTrip            | Setting arrival airport to: JFK
2025-03-14 16:25:48 | INFO     | RoundTrip            | Arrival airport set to: JFK
2025-03-14 16:25:49 | INFO     | RoundTrip            | Selecting airport from options: JFK
2025-03-14 16:25:50 | INFO     | RoundTrip            | Found 5 airport options
2025-03-14 16:25:50 | INFO     | RoundTrip            | Found matching airport: AirportJohn F. Kennedy International AirportJFK
2025-03-14 16:25:50 | INFO     | RoundTrip            | Selected Arrival airport: AirportJohn F. Kennedy International AirportJFK (Code: JFK)
2025-03-14 16:25:50 | INFO     | RoundTrip            | Actual Arrival airport: New York (NY) (JFK) (Code: JFK)
2025-03-14 16:25:50 | INFO     | RoundTrip            | Arrival airport selected: JFK
2025-03-14 16:25:50 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:25:50 | ERROR    | conftest             | Test FAILED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:25:50 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=aLWEaVzmEjq3lWDj#flights'>, {'url': None}), departure_airport = 'LHE', arrival_airport = 'JFK', adults = 2
children = 1, infants = 0, cabin = 'Business'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
        await page.goto("https://agoda.com")
        assert await rt.wait_for_agoda_image(), "Agoda image not found. Website is not loaded"
    
        # Locate and click on Flights tab
        await rt.click_flights()
        assert await rt.flights_is_clicked() == "true", "Flights tab was not clicked"
    
        await rt.select_roundtrip()
        assert await rt.is_round_trip_selected(), "Round trip was not selected"
    
        await rt.select_departure_airport(departure_airport)
        await rt.select_arrival_airport(arrival_airport)
    
        # fill in calendar dates and select cabin and passengers
>       await rt.set_departure_date()

tests/test_Round_trip.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x10c811160>

    async def set_departure_date(self) -> None:
        departure_date_str = self.departure_date_generator()
>       date = await self.PlaywrightHelper.date_select_helper(self, self.get_departure_date, self.get_next_month_button, departure_date_str)
E       TypeError: PlaywrightHelper.date_select_helper() takes 4 positional arguments but 5 were given

pages/Round_Trip.py:115: TypeError
2025-03-14 16:25:50 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:25:50 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[LHE-JFK-2-1-0-Business]_20250314_1625.png
2025-03-14 16:25:50 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:25:50 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:25:50 | INFO     | conftest             | Closing page
2025-03-14 16:25:50 | INFO     | conftest             | Closing browser
2025-03-14 16:25:50 | INFO     | conftest             | Launching browser
2025-03-14 16:25:52 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:25:52 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:25:53 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:25:53 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:26:01 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:26:01 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:26:01 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:26:01 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:26:01 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:26:01 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:26:01 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:26:01 | INFO     | RoundTrip            | Selecting departure airport: KHI
2025-03-14 16:26:01 | INFO     | RoundTrip            | Setting and verifying Departure airport: KHI
2025-03-14 16:26:02 | INFO     | RoundTrip            | Departure airport set to: KHI
2025-03-14 16:26:03 | INFO     | RoundTrip            | Selecting airport from options: KHI
2025-03-14 16:26:03 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:26:03 | INFO     | RoundTrip            | Found matching airport: AirportJinnah International AirportKHI
2025-03-14 16:26:03 | INFO     | RoundTrip            | Selected Departure airport: AirportJinnah International AirportKHI (Code: KHI)
2025-03-14 16:26:03 | INFO     | RoundTrip            | Actual Departure airport: Karachi (KHI) (Code: KHI)
2025-03-14 16:26:03 | INFO     | RoundTrip            | Departure airport selected: KHI
2025-03-14 16:26:03 | INFO     | RoundTrip            | Selecting arrival airport: IST
2025-03-14 16:26:03 | INFO     | RoundTrip            | Setting and verifying Arrival airport: IST
2025-03-14 16:26:03 | INFO     | RoundTrip            | Setting arrival airport to: IST
2025-03-14 16:26:03 | INFO     | RoundTrip            | Arrival airport set to: IST
2025-03-14 16:26:04 | INFO     | RoundTrip            | Selecting airport from options: IST
2025-03-14 16:26:04 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:26:04 | INFO     | RoundTrip            | Found matching airport: AirportIstanbul AirportIST
2025-03-14 16:26:04 | INFO     | RoundTrip            | Selected Arrival airport: AirportIstanbul AirportIST (Code: IST)
2025-03-14 16:26:04 | INFO     | RoundTrip            | Actual Arrival airport: İstanbul (IST) (Code: IST)
2025-03-14 16:26:04 | INFO     | RoundTrip            | Arrival airport selected: IST
2025-03-14 16:26:04 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:26:04 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:26:04 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=hTh08enM8D%2FbFHr8#flights'>, {'url': None}), departure_airport = 'KHI', arrival_airport = 'IST', adults = 1
children = 0, infants = 0, cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
        await page.goto("https://agoda.com")
        assert await rt.wait_for_agoda_image(), "Agoda image not found. Website is not loaded"
    
        # Locate and click on Flights tab
        await rt.click_flights()
        assert await rt.flights_is_clicked() == "true", "Flights tab was not clicked"
    
        await rt.select_roundtrip()
        assert await rt.is_round_trip_selected(), "Round trip was not selected"
    
        await rt.select_departure_airport(departure_airport)
        await rt.select_arrival_airport(arrival_airport)
    
        # fill in calendar dates and select cabin and passengers
>       await rt.set_departure_date()

tests/test_Round_trip.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x10c87ed50>

    async def set_departure_date(self) -> None:
        departure_date_str = self.departure_date_generator()
>       date = await self.PlaywrightHelper.date_select_helper(self, self.get_departure_date, self.get_next_month_button, departure_date_str)
E       TypeError: PlaywrightHelper.date_select_helper() takes 4 positional arguments but 5 were given

pages/Round_Trip.py:115: TypeError
2025-03-14 16:26:04 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:26:04 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1626.png
2025-03-14 16:26:04 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:26:04 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:26:04 | INFO     | conftest             | Closing page
2025-03-14 16:26:04 | INFO     | conftest             | Closing browser
2025-03-14 16:26:05 | INFO     | conftest             | Launching browser
2025-03-14 16:26:06 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:26:06 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:26:06 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:26:06 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:26:07 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:26:07 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:13: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:26:07 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:26:07 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1626.png
2025-03-14 16:26:07 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:26:07 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:26:07 | INFO     | conftest             | Closing page
2025-03-14 16:26:07 | INFO     | conftest             | Closing browser
2025-03-14 16:26:07 | INFO     | conftest             | Launching browser
2025-03-14 16:26:08 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:26:08 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:26:09 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:26:09 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:26:09 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:26:09 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:26:09 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:26:09 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1626.png
2025-03-14 16:26:09 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:26:09 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:26:09 | INFO     | conftest             | Closing page
2025-03-14 16:26:09 | INFO     | conftest             | Closing browser
2025-03-14 16:26:10 | INFO     | conftest             | Launching browser
2025-03-14 16:26:10 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:26:10 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:26:11 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:26:11 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:26:11 | ERROR    | conftest             | Test FAILED: test_flight_stops
2025-03-14 16:26:11 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_stops(page_tuple):
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:26:11 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_stops
2025-03-14 16:26:11 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_stops_20250314_1626.png
2025-03-14 16:26:12 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:26:12 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:26:12 | INFO     | conftest             | Closing page
2025-03-14 16:26:12 | INFO     | conftest             | Closing browser
2025-03-14 16:26:36 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:26:36 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:26:36 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:26:36 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:26:37 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:26:37 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:26:37 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:26:37 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:26:40 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:26:40 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:26:40 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:26:40 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:26:42 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:26:42 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:26:42 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:26:42 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:26:55 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:26:55 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:26:55 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:26:55 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:26:58 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:26:58 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:26:58 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:26:58 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:27:18 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:27:18 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:27:18 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:27:18 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:27:25 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:27:25 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:27:25 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:27:25 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:27:28 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:27:28 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:27:28 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:27:30 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:27:30 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:27:30 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:27:30 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:27:31 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:27:31 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:27:31 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:27:31 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:27:34 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:27:34 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:27:34 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:27:34 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:27:54 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:27:54 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:27:54 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:27:54 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:27:54 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:27:54 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:27:54 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:27:54 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:27:54 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:27:54 | INFO     | conftest             | Launching browser
2025-03-14 16:27:55 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:27:55 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:27:56 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:27:56 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:28:26 | ERROR    | conftest             | Test FAILED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:28:26 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=GQyWMYHtH%2BcrkbLz'>, {'url': None}), departure_airport = 'LHE', arrival_airport = 'JFK', adults = 2
children = 1, infants = 0, cabin = 'Business'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
>       await page.goto("https://agoda.com")

tests/test_Round_trip.py:10: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:147: in goto
    await self._channel.send("goto", locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:61: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x10d885d30>, cb = <function Channel.send.<locals>.<lambda> at 0x10dc19800>, is_internal = False

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", inspect.stack())
        parsed_st = _extract_stack_trace_information_from_stack(
            st, is_internal)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(
                error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.
E           Call log:
E             - navigating to "https://agoda.com/", waiting until "load"

venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:538: TimeoutError
2025-03-14 16:28:26 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:28:26 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[LHE-JFK-2-1-0-Business]_20250314_1628.png
2025-03-14 16:28:51 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:28:51 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:28:51 | INFO     | conftest             | Closing page
2025-03-14 16:28:51 | INFO     | conftest             | Closing browser
2025-03-14 16:28:52 | INFO     | conftest             | Launching browser
2025-03-14 16:28:53 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:28:53 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:28:54 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:28:54 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:29:24 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:29:24 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=t%2Fzf%2BXtbgNVjPPgD'>, {'url': None}), departure_airport = 'KHI', arrival_airport = 'IST', adults = 1
children = 0, infants = 0, cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
>       await page.goto("https://agoda.com")

tests/test_Round_trip.py:10: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:147: in goto
    await self._channel.send("goto", locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:61: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x10dc61bd0>, cb = <function Channel.send.<locals>.<lambda> at 0x10dc737e0>, is_internal = False

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", inspect.stack())
        parsed_st = _extract_stack_trace_information_from_stack(
            st, is_internal)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(
                error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.
E           Call log:
E             - navigating to "https://agoda.com/", waiting until "load"

venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:538: TimeoutError
2025-03-14 16:29:24 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:29:24 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1629.png
2025-03-14 16:29:32 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:29:32 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:29:32 | INFO     | conftest             | Closing page
2025-03-14 16:29:32 | INFO     | conftest             | Closing browser
2025-03-14 16:29:32 | INFO     | conftest             | Launching browser
2025-03-14 16:29:33 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:29:33 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:29:34 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:29:34 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:29:34 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:29:34 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:13: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:29:34 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:29:34 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1629.png
2025-03-14 16:29:34 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:29:34 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:29:34 | INFO     | conftest             | Closing page
2025-03-14 16:29:34 | INFO     | conftest             | Closing browser
2025-03-14 16:29:35 | INFO     | conftest             | Launching browser
2025-03-14 16:29:36 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:29:36 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:29:36 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:29:36 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:29:36 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:29:36 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:29:36 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:29:36 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1629.png
2025-03-14 16:29:36 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:29:36 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:29:36 | INFO     | conftest             | Closing page
2025-03-14 16:29:36 | INFO     | conftest             | Closing browser
2025-03-14 16:29:37 | INFO     | conftest             | Launching browser
2025-03-14 16:29:38 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:29:38 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:29:38 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:29:38 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:29:38 | ERROR    | conftest             | Test FAILED: test_flight_stops
2025-03-14 16:29:38 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_stops(page_tuple):
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:29:38 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_stops
2025-03-14 16:29:38 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_stops_20250314_1629.png
2025-03-14 16:29:39 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:29:39 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:29:39 | INFO     | conftest             | Closing page
2025-03-14 16:29:39 | INFO     | conftest             | Closing browser
2025-03-14 16:30:12 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:30:12 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:30:12 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:30:12 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:30:12 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:30:12 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:30:12 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:30:12 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:30:12 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:30:12 | INFO     | conftest             | Launching browser
2025-03-14 16:30:13 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:30:13 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:30:14 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:30:14 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:30:37 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:30:37 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:30:37 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:30:38 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:30:38 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:30:38 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:30:38 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:30:38 | INFO     | RoundTrip            | Selecting departure airport: LHE
2025-03-14 16:30:38 | INFO     | RoundTrip            | Setting and verifying Departure airport: LHE
2025-03-14 16:30:38 | INFO     | RoundTrip            | Departure airport set to: LHE
2025-03-14 16:30:39 | INFO     | RoundTrip            | Selecting airport from options: LHE
2025-03-14 16:30:40 | INFO     | RoundTrip            | Found 13 airport options
2025-03-14 16:30:40 | INFO     | RoundTrip            | Found matching airport: AirportAllama Iqbal International AirportLHE
2025-03-14 16:30:40 | INFO     | RoundTrip            | Selected Departure airport: AirportAllama Iqbal International AirportLHE (Code: LHE)
2025-03-14 16:30:40 | INFO     | RoundTrip            | Actual Departure airport: Lahore (LHE) (Code: LHE)
2025-03-14 16:30:40 | INFO     | RoundTrip            | Departure airport selected: LHE
2025-03-14 16:30:40 | INFO     | RoundTrip            | Selecting arrival airport: JFK
2025-03-14 16:30:40 | INFO     | RoundTrip            | Setting and verifying Arrival airport: JFK
2025-03-14 16:30:40 | INFO     | RoundTrip            | Setting arrival airport to: JFK
2025-03-14 16:30:40 | INFO     | RoundTrip            | Arrival airport set to: JFK
2025-03-14 16:30:41 | INFO     | RoundTrip            | Selecting airport from options: JFK
2025-03-14 16:30:41 | INFO     | RoundTrip            | Found 5 airport options
2025-03-14 16:30:41 | INFO     | RoundTrip            | Found matching airport: AirportJohn F. Kennedy International AirportJFK
2025-03-14 16:30:41 | INFO     | RoundTrip            | Selected Arrival airport: AirportJohn F. Kennedy International AirportJFK (Code: JFK)
2025-03-14 16:30:41 | INFO     | RoundTrip            | Actual Arrival airport: New York (NY) (JFK) (Code: JFK)
2025-03-14 16:30:41 | INFO     | RoundTrip            | Arrival airport selected: JFK
2025-03-14 16:30:41 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:30:41 | ERROR    | conftest             | Test FAILED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:30:41 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=jtmt50aFHIYa%2F8Yu#flights'>, {'url': None}), departure_airport = 'LHE', arrival_airport = 'JFK', adults = 2
children = 1, infants = 0, cabin = 'Business'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
        await page.goto("https://agoda.com")
        assert await rt.wait_for_agoda_image(), "Agoda image not found. Website is not loaded"
    
        # Locate and click on Flights tab
        await rt.click_flights()
        assert await rt.flights_is_clicked() == "true", "Flights tab was not clicked"
    
        await rt.select_roundtrip()
        assert await rt.is_round_trip_selected(), "Round trip was not selected"
    
        await rt.select_departure_airport(departure_airport)
        await rt.select_arrival_airport(arrival_airport)
    
        # fill in calendar dates and select cabin and passengers
>       await rt.set_departure_date()

tests/test_Round_trip.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x10b485160>

    async def set_departure_date(self) -> None:
        departure_date_str = self.departure_date_generator()
>       await self.get_departure_date(departure_date_str).click()
E       AttributeError: 'coroutine' object has no attribute 'click'

pages/Round_Trip.py:115: AttributeError
2025-03-14 16:30:41 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:30:41 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[LHE-JFK-2-1-0-Business]_20250314_1630.png
2025-03-14 16:30:41 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:30:41 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:30:41 | INFO     | conftest             | Closing page
2025-03-14 16:30:41 | INFO     | conftest             | Closing browser
2025-03-14 16:30:42 | INFO     | conftest             | Launching browser
2025-03-14 16:30:43 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:30:43 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:30:43 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:30:43 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:31:00 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:31:00 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:31:00 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:31:00 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:31:00 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:31:00 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:31:01 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:31:01 | INFO     | RoundTrip            | Selecting departure airport: KHI
2025-03-14 16:31:01 | INFO     | RoundTrip            | Setting and verifying Departure airport: KHI
2025-03-14 16:31:01 | INFO     | RoundTrip            | Departure airport set to: KHI
2025-03-14 16:31:02 | INFO     | RoundTrip            | Selecting airport from options: KHI
2025-03-14 16:31:02 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:31:02 | INFO     | RoundTrip            | Found matching airport: AirportJinnah International AirportKHI
2025-03-14 16:31:02 | INFO     | RoundTrip            | Selected Departure airport: AirportJinnah International AirportKHI (Code: KHI)
2025-03-14 16:31:02 | INFO     | RoundTrip            | Actual Departure airport: Karachi (KHI) (Code: KHI)
2025-03-14 16:31:02 | INFO     | RoundTrip            | Departure airport selected: KHI
2025-03-14 16:31:02 | INFO     | RoundTrip            | Selecting arrival airport: IST
2025-03-14 16:31:02 | INFO     | RoundTrip            | Setting and verifying Arrival airport: IST
2025-03-14 16:31:02 | INFO     | RoundTrip            | Setting arrival airport to: IST
2025-03-14 16:31:02 | INFO     | RoundTrip            | Arrival airport set to: IST
2025-03-14 16:31:03 | INFO     | RoundTrip            | Selecting airport from options: IST
2025-03-14 16:31:03 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:31:03 | INFO     | RoundTrip            | Found matching airport: AirportIstanbul AirportIST
2025-03-14 16:31:04 | INFO     | RoundTrip            | Selected Arrival airport: AirportIstanbul AirportIST (Code: IST)
2025-03-14 16:31:04 | INFO     | RoundTrip            | Actual Arrival airport: İstanbul (IST) (Code: IST)
2025-03-14 16:31:04 | INFO     | RoundTrip            | Arrival airport selected: IST
2025-03-14 16:31:04 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:31:04 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:31:04 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=pW4rK%2BW%2BmDBcLgXY#flights'>, {'url': None}), departure_airport = 'KHI', arrival_airport = 'IST'
adults = 1, children = 0, infants = 0, cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
        await page.goto("https://agoda.com")
        assert await rt.wait_for_agoda_image(), "Agoda image not found. Website is not loaded"
    
        # Locate and click on Flights tab
        await rt.click_flights()
        assert await rt.flights_is_clicked() == "true", "Flights tab was not clicked"
    
        await rt.select_roundtrip()
        assert await rt.is_round_trip_selected(), "Round trip was not selected"
    
        await rt.select_departure_airport(departure_airport)
        await rt.select_arrival_airport(arrival_airport)
    
        # fill in calendar dates and select cabin and passengers
>       await rt.set_departure_date()

tests/test_Round_trip.py:24: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x10b4f6c10>

    async def set_departure_date(self) -> None:
        departure_date_str = self.departure_date_generator()
>       await self.get_departure_date(departure_date_str).click()
E       AttributeError: 'coroutine' object has no attribute 'click'

pages/Round_Trip.py:115: AttributeError
2025-03-14 16:31:04 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:31:04 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1631.png
2025-03-14 16:31:04 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:31:04 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:31:04 | INFO     | conftest             | Closing page
2025-03-14 16:31:04 | INFO     | conftest             | Closing browser
2025-03-14 16:31:04 | INFO     | conftest             | Launching browser
2025-03-14 16:31:05 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:31:05 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:31:06 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:31:06 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:31:07 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:31:07 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:13: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:31:07 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:31:07 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1631.png
2025-03-14 16:31:07 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:31:07 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:31:07 | INFO     | conftest             | Closing page
2025-03-14 16:31:07 | INFO     | conftest             | Closing browser
2025-03-14 16:31:07 | INFO     | conftest             | Launching browser
2025-03-14 16:31:08 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:31:08 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:31:09 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:31:09 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:31:09 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:31:09 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:31:09 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:31:09 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1631.png
2025-03-14 16:31:09 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:31:09 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:31:09 | INFO     | conftest             | Closing page
2025-03-14 16:31:09 | INFO     | conftest             | Closing browser
2025-03-14 16:31:09 | INFO     | conftest             | Launching browser
2025-03-14 16:31:11 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:31:11 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:31:11 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:31:11 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:31:12 | ERROR    | conftest             | Test FAILED: test_flight_stops
2025-03-14 16:31:12 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_stops(page_tuple):
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:31:12 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_stops
2025-03-14 16:31:12 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_stops_20250314_1631.png
2025-03-14 16:31:12 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:31:12 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:31:12 | INFO     | conftest             | Closing page
2025-03-14 16:31:12 | INFO     | conftest             | Closing browser
2025-03-14 16:33:18 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:18 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:18 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:18 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:33:23 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:23 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:23 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:23 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:33:36 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:36 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:36 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:36 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:33:39 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:39 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:40 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:42 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:42 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:42 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:42 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:33:51 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:51 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:51 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:53 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:53 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:53 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:53 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:33:56 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:56 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:56 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:56 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:33:57 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:33:57 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:33:57 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:33:57 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:34:00 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:34:00 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:34:00 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:34:00 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:34:00 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:34:00 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:34:00 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:34:00 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:34:00 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:34:00 | INFO     | conftest             | Launching browser
2025-03-14 16:34:01 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:34:01 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:34:02 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:34:02 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:34:13 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:34:13 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:34:13 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:34:13 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:34:13 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:34:13 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:34:14 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:34:14 | INFO     | RoundTrip            | Selecting departure airport: LHE
2025-03-14 16:34:14 | INFO     | RoundTrip            | Setting and verifying Departure airport: LHE
2025-03-14 16:34:14 | INFO     | RoundTrip            | Departure airport set to: LHE
2025-03-14 16:34:15 | INFO     | RoundTrip            | Selecting airport from options: LHE
2025-03-14 16:34:15 | INFO     | RoundTrip            | Found 13 airport options
2025-03-14 16:34:15 | INFO     | RoundTrip            | Found matching airport: AirportAllama Iqbal International AirportLHE
2025-03-14 16:34:15 | INFO     | RoundTrip            | Selected Departure airport: AirportAllama Iqbal International AirportLHE (Code: LHE)
2025-03-14 16:34:15 | INFO     | RoundTrip            | Actual Departure airport: Lahore (LHE) (Code: LHE)
2025-03-14 16:34:15 | INFO     | RoundTrip            | Departure airport selected: LHE
2025-03-14 16:34:15 | INFO     | RoundTrip            | Selecting arrival airport: JFK
2025-03-14 16:34:15 | INFO     | RoundTrip            | Setting and verifying Arrival airport: JFK
2025-03-14 16:34:15 | INFO     | RoundTrip            | Setting arrival airport to: JFK
2025-03-14 16:34:15 | INFO     | RoundTrip            | Arrival airport set to: JFK
2025-03-14 16:34:16 | INFO     | RoundTrip            | Selecting airport from options: JFK
2025-03-14 16:34:16 | INFO     | RoundTrip            | Found 5 airport options
2025-03-14 16:34:16 | INFO     | RoundTrip            | Found matching airport: AirportJohn F. Kennedy International AirportJFK
2025-03-14 16:34:16 | INFO     | RoundTrip            | Selected Arrival airport: AirportJohn F. Kennedy International AirportJFK (Code: JFK)
2025-03-14 16:34:16 | INFO     | RoundTrip            | Actual Arrival airport: New York (NY) (JFK) (Code: JFK)
2025-03-14 16:34:16 | INFO     | RoundTrip            | Arrival airport selected: JFK
2025-03-14 16:34:16 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:34:16 | INFO     | RoundTrip            | Departure date set to: 2025-04-23
2025-03-14 16:34:16 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:34:26 | WARNING  | BasePage             | Element '//span[@data-selenium-date='2025-05-13']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//span[@data-selenium-date='2025-05-13']") to be visible

2025-03-14 16:34:27 | ERROR    | conftest             | Test FAILED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:34:27 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=DwLF%2BJXuPiWcfyGH#flights'>, {'url': None}), departure_airport = 'LHE', arrival_airport = 'JFK', adults = 2
children = 1, infants = 0, cabin = 'Business'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
        await page.goto("https://agoda.com")
        assert await rt.wait_for_agoda_image(), "Agoda image not found. Website is not loaded"
    
        # Locate and click on Flights tab
        await rt.click_flights()
        assert await rt.flights_is_clicked() == "true", "Flights tab was not clicked"
    
        await rt.select_roundtrip()
        assert await rt.is_round_trip_selected(), "Round trip was not selected"
    
        await rt.select_departure_airport(departure_airport)
        await rt.select_arrival_airport(arrival_airport)
    
        # fill in calendar dates and select cabin and passengers
        await rt.set_departure_date()
>       await rt.set_return_date()

tests/test_Round_trip.py:25: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
pages/Round_Trip.py:116: in set_return_date
    date = await self.get_return_date(return_date_str)
pages/Round_Trip.py:62: in get_return_date
    return await self.PlaywrightHelper.date_select_helper(get_arrival_date_temp, next_month_button, depart_arrive_date_str)
utils/common.py:30: in date_select_helper
    await self.wait_1000()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <utils.common.PlaywrightHelper object at 0x1099292b0>

    async def wait_1000 (self):
>       await self.page.wait_for_timeout(1000)
E       AttributeError: 'PlaywrightHelper' object has no attribute 'page'

utils/common.py:14: AttributeError
2025-03-14 16:34:27 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:34:27 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[LHE-JFK-2-1-0-Business]_20250314_1634.png
2025-03-14 16:34:27 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:34:27 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:34:27 | INFO     | conftest             | Closing page
2025-03-14 16:34:27 | INFO     | conftest             | Closing browser
2025-03-14 16:34:27 | INFO     | conftest             | Launching browser
2025-03-14 16:34:29 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:34:29 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:34:29 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:34:29 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:34:39 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:34:39 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:34:39 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:34:39 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:34:39 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:34:39 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:34:40 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:34:40 | INFO     | RoundTrip            | Selecting departure airport: KHI
2025-03-14 16:34:40 | INFO     | RoundTrip            | Setting and verifying Departure airport: KHI
2025-03-14 16:34:40 | INFO     | RoundTrip            | Departure airport set to: KHI
2025-03-14 16:34:41 | INFO     | RoundTrip            | Selecting airport from options: KHI
2025-03-14 16:34:41 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:34:41 | INFO     | RoundTrip            | Found matching airport: AirportJinnah International AirportKHI
2025-03-14 16:34:41 | INFO     | RoundTrip            | Selected Departure airport: AirportJinnah International AirportKHI (Code: KHI)
2025-03-14 16:34:41 | INFO     | RoundTrip            | Actual Departure airport: Karachi (KHI) (Code: KHI)
2025-03-14 16:34:41 | INFO     | RoundTrip            | Departure airport selected: KHI
2025-03-14 16:34:41 | INFO     | RoundTrip            | Selecting arrival airport: IST
2025-03-14 16:34:41 | INFO     | RoundTrip            | Setting and verifying Arrival airport: IST
2025-03-14 16:34:41 | INFO     | RoundTrip            | Setting arrival airport to: IST
2025-03-14 16:34:41 | INFO     | RoundTrip            | Arrival airport set to: IST
2025-03-14 16:34:42 | INFO     | RoundTrip            | Selecting airport from options: IST
2025-03-14 16:34:43 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:34:43 | INFO     | RoundTrip            | Found matching airport: AirportIstanbul AirportIST
2025-03-14 16:34:43 | INFO     | RoundTrip            | Selected Arrival airport: AirportIstanbul AirportIST (Code: IST)
2025-03-14 16:34:43 | INFO     | RoundTrip            | Actual Arrival airport: İstanbul (IST) (Code: IST)
2025-03-14 16:34:43 | INFO     | RoundTrip            | Arrival airport selected: IST
2025-03-14 16:34:43 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:34:43 | INFO     | RoundTrip            | Departure date set to: 2025-04-23
2025-03-14 16:34:43 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:34:53 | WARNING  | BasePage             | Element '//span[@data-selenium-date='2025-05-13']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//span[@data-selenium-date='2025-05-13']") to be visible

2025-03-14 16:34:53 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:34:53 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=wWaYnzGvN7ArXnWy#flights'>, {'url': None}), departure_airport = 'KHI', arrival_airport = 'IST', adults = 1
children = 0, infants = 0, cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
        await page.goto("https://agoda.com")
        assert await rt.wait_for_agoda_image(), "Agoda image not found. Website is not loaded"
    
        # Locate and click on Flights tab
        await rt.click_flights()
        assert await rt.flights_is_clicked() == "true", "Flights tab was not clicked"
    
        await rt.select_roundtrip()
        assert await rt.is_round_trip_selected(), "Round trip was not selected"
    
        await rt.select_departure_airport(departure_airport)
        await rt.select_arrival_airport(arrival_airport)
    
        # fill in calendar dates and select cabin and passengers
        await rt.set_departure_date()
>       await rt.set_return_date()

tests/test_Round_trip.py:25: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
pages/Round_Trip.py:116: in set_return_date
    date = await self.get_return_date(return_date_str)
pages/Round_Trip.py:62: in get_return_date
    return await self.PlaywrightHelper.date_select_helper(get_arrival_date_temp, next_month_button, depart_arrive_date_str)
utils/common.py:30: in date_select_helper
    await self.wait_1000()
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <utils.common.PlaywrightHelper object at 0x10999ae90>

    async def wait_1000 (self):
>       await self.page.wait_for_timeout(1000)
E       AttributeError: 'PlaywrightHelper' object has no attribute 'page'

utils/common.py:14: AttributeError
2025-03-14 16:34:53 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:34:53 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1634.png
2025-03-14 16:34:53 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:34:53 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:34:53 | INFO     | conftest             | Closing page
2025-03-14 16:34:54 | INFO     | conftest             | Closing browser
2025-03-14 16:34:54 | INFO     | conftest             | Launching browser
2025-03-14 16:34:55 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:34:55 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:34:56 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:34:56 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:34:56 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:34:56 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:13: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:34:56 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:34:56 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1634.png
2025-03-14 16:34:56 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:34:56 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:34:56 | INFO     | conftest             | Closing page
2025-03-14 16:34:56 | INFO     | conftest             | Closing browser
2025-03-14 16:34:56 | INFO     | conftest             | Launching browser
2025-03-14 16:34:57 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:34:57 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:34:58 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:34:58 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:34:58 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:34:58 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:34:58 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:34:58 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1634.png
2025-03-14 16:34:58 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:34:58 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:34:58 | INFO     | conftest             | Closing page
2025-03-14 16:34:58 | INFO     | conftest             | Closing browser
2025-03-14 16:34:59 | INFO     | conftest             | Launching browser
2025-03-14 16:35:00 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:35:00 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:35:01 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:35:01 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:35:01 | ERROR    | conftest             | Test FAILED: test_flight_stops
2025-03-14 16:35:01 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_stops(page_tuple):
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:35:01 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_stops
2025-03-14 16:35:01 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_stops_20250314_1635.png
2025-03-14 16:35:01 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:35:01 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:35:01 | INFO     | conftest             | Closing page
2025-03-14 16:35:01 | INFO     | conftest             | Closing browser
2025-03-14 16:35:47 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:35:47 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:35:47 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:35:47 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:05 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:05 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:05 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:05 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:15 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:15 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:15 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:15 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:17 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:17 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:17 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:17 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:20 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:20 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:20 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:20 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:26 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:26 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:26 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:26 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:30 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:30 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:30 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:35 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:35 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:35 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:35 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:37 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:37 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:37 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:40 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:40 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:40 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:40 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:37:46 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:37:46 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:37:46 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:37:46 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:37:46 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:37:46 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:37:46 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:37:46 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:37:46 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:37:46 | INFO     | conftest             | Launching browser
2025-03-14 16:37:47 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:37:47 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:37:48 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:37:48 | ERROR    | conftest             | Test FAILED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:37:48 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None}), departure_airport = 'LHE', arrival_airport = 'JFK', adults = 2, children = 1, infants = 0
cabin = 'Business'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
>       rt = RoundTrip(page)

tests/test_Round_trip.py:7: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x102bf1160>, page = <Page url='about:blank'>

    def __init__(self, page: Page):
        super().__init__(page)
>       self.PlaywrightHelper = PlaywrightHelper()
E       TypeError: PlaywrightHelper.__init__() missing 1 required positional argument: 'page'

pages/Round_Trip.py:17: TypeError
2025-03-14 16:37:48 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:37:48 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[LHE-JFK-2-1-0-Business]_20250314_1637.png
2025-03-14 16:37:48 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:37:48 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:37:48 | INFO     | conftest             | Closing page
2025-03-14 16:37:48 | INFO     | conftest             | Closing browser
2025-03-14 16:37:48 | INFO     | conftest             | Launching browser
2025-03-14 16:37:49 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:37:49 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:37:50 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:37:50 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:37:50 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None}), departure_airport = 'KHI', arrival_airport = 'IST', adults = 1, children = 0, infants = 0
cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
>       rt = RoundTrip(page)

tests/test_Round_trip.py:7: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x102c26990>, page = <Page url='about:blank'>

    def __init__(self, page: Page):
        super().__init__(page)
>       self.PlaywrightHelper = PlaywrightHelper()
E       TypeError: PlaywrightHelper.__init__() missing 1 required positional argument: 'page'

pages/Round_Trip.py:17: TypeError
2025-03-14 16:37:50 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:37:50 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1637.png
2025-03-14 16:37:50 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:37:50 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:37:50 | INFO     | conftest             | Closing page
2025-03-14 16:37:50 | INFO     | conftest             | Closing browser
2025-03-14 16:37:50 | INFO     | conftest             | Launching browser
2025-03-14 16:37:51 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:37:51 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:37:52 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:37:52 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:37:53 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:37:53 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:13: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:37:53 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:37:53 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1637.png
2025-03-14 16:37:53 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:37:53 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:37:53 | INFO     | conftest             | Closing page
2025-03-14 16:37:53 | INFO     | conftest             | Closing browser
2025-03-14 16:37:53 | INFO     | conftest             | Launching browser
2025-03-14 16:37:54 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:37:54 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:37:55 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:37:55 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:37:55 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:37:55 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:37:55 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:37:55 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1637.png
2025-03-14 16:37:55 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:37:55 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:37:55 | INFO     | conftest             | Closing page
2025-03-14 16:37:55 | INFO     | conftest             | Closing browser
2025-03-14 16:37:56 | INFO     | conftest             | Launching browser
2025-03-14 16:37:57 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:37:57 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:37:58 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:37:58 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:37:58 | ERROR    | conftest             | Test FAILED: test_flight_stops
2025-03-14 16:37:58 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_stops(page_tuple):
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:37:58 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_stops
2025-03-14 16:37:58 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_stops_20250314_1637.png
2025-03-14 16:37:58 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:37:58 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:37:58 | INFO     | conftest             | Closing page
2025-03-14 16:37:58 | INFO     | conftest             | Closing browser
2025-03-14 16:38:09 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:38:09 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:38:09 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:38:09 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:38:14 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:38:14 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:38:14 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:38:14 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:38:14 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:38:14 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:38:14 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:38:14 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:38:14 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:38:14 | INFO     | conftest             | Launching browser
2025-03-14 16:38:15 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:38:15 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:38:15 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:38:15 | ERROR    | conftest             | Test FAILED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:38:15 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None}), departure_airport = 'LHE', arrival_airport = 'JFK', adults = 2, children = 1, infants = 0
cabin = 'Business'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
>       rt = RoundTrip(page)

tests/test_Round_trip.py:7: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x108ee1160>, page = <Page url='about:blank'>

    def __init__(self, page: Page):
        super().__init__(page)
>       self.PlaywrightHelper = PlaywrightHelper()
E       TypeError: PlaywrightHelper.__init__() missing 1 required positional argument: 'page'

pages/Round_Trip.py:17: TypeError
2025-03-14 16:38:15 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:38:15 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[LHE-JFK-2-1-0-Business]_20250314_1638.png
2025-03-14 16:38:16 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:38:16 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:38:16 | INFO     | conftest             | Closing page
2025-03-14 16:38:16 | INFO     | conftest             | Closing browser
2025-03-14 16:38:16 | INFO     | conftest             | Launching browser
2025-03-14 16:38:17 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:38:17 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:38:18 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:38:18 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:38:18 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None}), departure_airport = 'KHI', arrival_airport = 'IST', adults = 1, children = 0, infants = 0
cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
>       rt = RoundTrip(page)

tests/test_Round_trip.py:7: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <pages.Round_Trip.RoundTrip object at 0x108f1a990>, page = <Page url='about:blank'>

    def __init__(self, page: Page):
        super().__init__(page)
>       self.PlaywrightHelper = PlaywrightHelper()
E       TypeError: PlaywrightHelper.__init__() missing 1 required positional argument: 'page'

pages/Round_Trip.py:17: TypeError
2025-03-14 16:38:18 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:38:18 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1638.png
2025-03-14 16:38:18 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:38:18 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:38:18 | INFO     | conftest             | Closing page
2025-03-14 16:38:18 | INFO     | conftest             | Closing browser
2025-03-14 16:38:19 | INFO     | conftest             | Launching browser
2025-03-14 16:38:20 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:38:20 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:38:20 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:38:20 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:38:20 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:38:20 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:13: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:38:20 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:38:20 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1638.png
2025-03-14 16:38:20 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:38:20 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:38:20 | INFO     | conftest             | Closing page
2025-03-14 16:38:20 | INFO     | conftest             | Closing browser
2025-03-14 16:38:21 | INFO     | conftest             | Launching browser
2025-03-14 16:38:22 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:38:22 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:38:22 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:38:22 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:38:23 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:38:23 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:38:23 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:38:23 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1638.png
2025-03-14 16:38:23 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:38:23 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:38:23 | INFO     | conftest             | Closing page
2025-03-14 16:38:23 | INFO     | conftest             | Closing browser
2025-03-14 16:38:23 | INFO     | conftest             | Launching browser
2025-03-14 16:38:24 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:38:24 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:38:25 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:38:25 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:38:25 | ERROR    | conftest             | Test FAILED: test_flight_stops
2025-03-14 16:38:25 | ERROR    | conftest             | Error: page_tuple = (<Page url='about:blank'>, {'url': None})

    @pytest.mark.asyncio
    async def test_flight_stops(page_tuple):
        page, get_url = page_tuple
        trip = FlightInfo(page)
>       await page.goto(get_url["url"])

tests/test_flight_options.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <Page url='about:blank'>, url = None, timeout = None, waitUntil = None, referer = None

    async def goto(
        self,
        url: str,
        timeout: float = None,
        waitUntil: DocumentLoadState = None,
        referer: str = None,
    ) -> Optional[Response]:
>       return await self._main_frame.goto(**locals_to_params(locals()))
E       TypeError: Frame.goto() missing 1 required positional argument: 'url'

venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: TypeError
2025-03-14 16:38:25 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_stops
2025-03-14 16:38:25 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_stops_20250314_1638.png
2025-03-14 16:38:25 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:38:25 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:38:25 | INFO     | conftest             | Closing page
2025-03-14 16:38:25 | INFO     | conftest             | Closing browser
2025-03-14 16:39:26 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:39:26 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:39:26 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:39:26 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:39:28 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:39:28 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:39:28 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:39:28 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:40:03 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:40:03 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:40:03 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:40:03 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:40:03 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:40:03 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:40:03 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:40:03 | INFO     | conftest             | Cleared 5 existing screenshots from directory
2025-03-14 16:40:03 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:40:03 | INFO     | conftest             | Launching browser
2025-03-14 16:40:04 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:40:04 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:40:05 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:40:05 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:40:14 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:40:14 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:40:14 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:40:15 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:40:15 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:40:15 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:40:16 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:40:16 | INFO     | RoundTrip            | Selecting departure airport: LHE
2025-03-14 16:40:16 | INFO     | RoundTrip            | Setting and verifying Departure airport: LHE
2025-03-14 16:40:16 | INFO     | RoundTrip            | Departure airport set to: LHE
2025-03-14 16:40:17 | INFO     | RoundTrip            | Selecting airport from options: LHE
2025-03-14 16:40:17 | INFO     | RoundTrip            | Found 13 airport options
2025-03-14 16:40:17 | INFO     | RoundTrip            | Found matching airport: AirportAllama Iqbal International AirportLHE
2025-03-14 16:40:17 | INFO     | RoundTrip            | Selected Departure airport: AirportAllama Iqbal International AirportLHE (Code: LHE)
2025-03-14 16:40:17 | INFO     | RoundTrip            | Actual Departure airport: Lahore (LHE) (Code: LHE)
2025-03-14 16:40:17 | INFO     | RoundTrip            | Departure airport selected: LHE
2025-03-14 16:40:17 | INFO     | RoundTrip            | Selecting arrival airport: JFK
2025-03-14 16:40:17 | INFO     | RoundTrip            | Setting and verifying Arrival airport: JFK
2025-03-14 16:40:17 | INFO     | RoundTrip            | Setting arrival airport to: JFK
2025-03-14 16:40:17 | INFO     | RoundTrip            | Arrival airport set to: JFK
2025-03-14 16:40:18 | INFO     | RoundTrip            | Selecting airport from options: JFK
2025-03-14 16:40:18 | INFO     | RoundTrip            | Found 5 airport options
2025-03-14 16:40:18 | INFO     | RoundTrip            | Found matching airport: AirportJohn F. Kennedy International AirportJFK
2025-03-14 16:40:18 | INFO     | RoundTrip            | Selected Arrival airport: AirportJohn F. Kennedy International AirportJFK (Code: JFK)
2025-03-14 16:40:18 | INFO     | RoundTrip            | Actual Arrival airport: New York (NY) (JFK) (Code: JFK)
2025-03-14 16:40:18 | INFO     | RoundTrip            | Arrival airport selected: JFK
2025-03-14 16:40:18 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:40:18 | INFO     | RoundTrip            | Departure date set to: 2025-04-23
2025-03-14 16:40:18 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:40:28 | WARNING  | BasePage             | Element '//span[@data-selenium-date='2025-05-13']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//span[@data-selenium-date='2025-05-13']") to be visible

2025-03-14 16:40:29 | INFO     | RoundTrip            | Return date set to: 2025-05-13
2025-03-14 16:40:29 | INFO     | RoundTrip            | Checking if departure date is selected
2025-03-14 16:40:29 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:40:29 | INFO     | RoundTrip            | Expected departure date: 2025-04-23, Actual: 2025-04-23
2025-03-14 16:40:29 | INFO     | RoundTrip            | Departure date is correctly selected
2025-03-14 16:40:29 | INFO     | RoundTrip            | Checking if return date is selected
2025-03-14 16:40:29 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:40:29 | INFO     | RoundTrip            | Expected return date: 2025-05-13, Actual: 2025-05-13
2025-03-14 16:40:29 | INFO     | RoundTrip            | Return date is correctly selected
2025-03-14 16:40:29 | INFO     | RoundTrip            | Selecting passengers: Adults=2, Children=1, Infants=0, Cabin=Business
2025-03-14 16:40:29 | INFO     | RoundTrip            | Adjusting adult count to 2
2025-03-14 16:40:29 | INFO     | RoundTrip            | Current adults: 1, Target: 2
2025-03-14 16:40:30 | INFO     | RoundTrip            | Adjusting children count to 1
2025-03-14 16:40:30 | INFO     | RoundTrip            | Current childrens: 0, Target: 1
2025-03-14 16:40:30 | INFO     | RoundTrip            | Adjusting infant count to 0
2025-03-14 16:40:30 | INFO     | RoundTrip            | Current infants: 0, Target: 0
2025-03-14 16:40:30 | INFO     | RoundTrip            | Selecting cabin class: Business
2025-03-14 16:40:30 | INFO     | RoundTrip            | Getting passengers and cabin count
2025-03-14 16:40:30 | INFO     | RoundTrip            | Clicking search button
2025-03-14 16:40:30 | INFO     | RoundTrip            | Search button clicked
2025-03-14 16:40:30 | INFO     | RoundTrip            | Checking if search was successful
2025-03-14 16:40:34 | INFO     | RoundTrip            | Search successful - results found
2025-03-14 16:40:34 | INFO     | conftest             | Test PASSED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:40:34 | INFO     | conftest             | Test completed: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:40:34 | INFO     | conftest             | Closing page
2025-03-14 16:40:34 | INFO     | conftest             | Closing browser
2025-03-14 16:40:34 | INFO     | conftest             | Launching browser
2025-03-14 16:40:35 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:40:35 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:40:36 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:40:36 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:41:06 | ERROR    | conftest             | Test FAILED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:41:06 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/?ds=aopR4AEzY4VrZddF'>, {'url': 'https://www.agoda.com/flights/results?departureFrom...rivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Business&adults=2&children=1&sort=8'})
departure_airport = 'KHI', arrival_airport = 'IST', adults = 1, children = 0, infants = 0, cabin = 'Economy'

    @pytest.mark.asyncio
    async def test_flight_booking(page_tuple, departure_airport, arrival_airport, adults, children, infants, cabin):
        page, set_url = page_tuple
        rt = RoundTrip(page)
    
        # Go to Agoda website and wait for logo
>       await page.goto("https://agoda.com")

tests/test_Round_trip.py:10: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:147: in goto
    await self._channel.send("goto", locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:61: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x1089725d0>, cb = <function Channel.send.<locals>.<lambda> at 0x108ab0540>, is_internal = False

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", inspect.stack())
        parsed_st = _extract_stack_trace_information_from_stack(
            st, is_internal)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(
                error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.
E           Call log:
E             - navigating to "https://agoda.com/", waiting until "load"

venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:538: TimeoutError
2025-03-14 16:41:06 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:41:06 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_booking[KHI-IST-1-0-0-Economy]_20250314_1641.png
2025-03-14 16:41:06 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:41:06 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:41:06 | INFO     | conftest             | Closing page
2025-03-14 16:41:06 | INFO     | conftest             | Closing browser
2025-03-14 16:41:07 | INFO     | conftest             | Launching browser
2025-03-14 16:41:08 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:41:08 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:41:08 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:41:08 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:41:35 | INFO     | FlightOptions        | Validating search parameters
2025-03-14 16:41:35 | INFO     | FlightOptions        | Validating URL: https://www.agoda.com/flights/results?departureFrom=LHE&departureFromType=1&arrivalTo=JFK&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Business&adults=2&children=1&sort=8
2025-03-14 16:41:35 | INFO     | FlightOptions        | Extracted from URL:
2025-03-14 16:41:35 | INFO     | FlightOptions        | departureFrom: LHE
2025-03-14 16:41:35 | INFO     | FlightOptions        | arrivalTo: JFK
2025-03-14 16:41:35 | INFO     | FlightOptions        | departDate: 2025-04-23
2025-03-14 16:41:35 | INFO     | FlightOptions        | returnDate: 2025-05-13
2025-03-14 16:41:35 | INFO     | FlightOptions        | adults: 2
2025-03-14 16:41:35 | INFO     | FlightOptions        | children: 1
2025-03-14 16:41:35 | INFO     | FlightOptions        | infants: 0
2025-03-14 16:41:35 | INFO     | FlightOptions        | cabinType: Business
2025-03-14 16:41:35 | INFO     | FlightOptions        | Validating from header
2025-03-14 16:41:35 | INFO     | FlightOptions        | Departure value: 
2025-03-14 16:41:35 | INFO     | FlightOptions        | Arrival value: 
2025-03-14 16:41:36 | INFO     | FlightOptions        | Clicked departure calendar button
2025-03-14 16:41:36 | INFO     | FlightOptions        | Departure date: 2025-04-23
2025-03-14 16:41:36 | INFO     | FlightOptions        | Clicked return calendar button
2025-03-14 16:41:37 | INFO     | FlightOptions        | Return date: 2025-05-13
2025-03-14 16:41:37 | INFO     | FlightOptions        | Clicked passenger dropdown
2025-03-14 16:41:38 | INFO     | FlightOptions        | Adults count: 2
2025-03-14 16:41:38 | INFO     | FlightOptions        | Children count: 1
2025-03-14 16:41:38 | INFO     | FlightOptions        | Infants count: 0
2025-03-14 16:41:38 | INFO     | FlightOptions        | Cabin type: Business
2025-03-14 16:41:38 | INFO     | FlightOptions        | Extracted from Header: ['', '', '2025-04-23', '2025-05-13', '2', '1', '0', 'Business']
2025-03-14 16:41:38 | WARNING  | FlightOptions        | URL value 'lhe' not found in header value ''
2025-03-14 16:41:38 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:41:38 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/flights/results?departureFrom=LHE&departureFromType=1&arrivalTo=JFK&arrivalToType=1&...rivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Business&adults=2&children=1&sort=8'})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
        await page.goto(get_url["url"])
>       assert await trip.validate_search(get_url["url"])
E       assert False

tests/test_flight_options.py:14: AssertionError
2025-03-14 16:41:38 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:41:38 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1641.png
2025-03-14 16:41:38 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:41:38 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:41:38 | INFO     | conftest             | Closing page
2025-03-14 16:41:38 | INFO     | conftest             | Closing browser
2025-03-14 16:41:38 | INFO     | conftest             | Launching browser
2025-03-14 16:41:39 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:41:39 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:41:40 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:41:40 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:42:10 | ERROR    | conftest             | Test FAILED: test_flight_data
2025-03-14 16:42:10 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/flights/results?departureFrom=LHE&departureFromType=1&arrivalTo=JFK&arrivalToType=1&...rivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Business&adults=2&children=1&sort=8'})

    @pytest.mark.asyncio
    async def test_flight_data(page_tuple):
        page, get_url = page_tuple   # recieves tuple from page fixture
        trip = FlightInfo(page)    # creates instance  of flightinfo class
>       await page.goto(get_url["url"])

tests/test_flight_options.py:22: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
venv/lib/python3.13/site-packages/playwright/async_api/_generated.py:9007: in goto
    await self._impl_obj.goto(
venv/lib/python3.13/site-packages/playwright/_impl/_page.py:559: in goto
    return await self._main_frame.goto(**locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:147: in goto
    await self._channel.send("goto", locals_to_params(locals()))
venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:61: in send
    return await self._connection.wrap_api_call(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <playwright._impl._connection.Connection object at 0x1089bdba0>, cb = <function Channel.send.<locals>.<lambda> at 0x108a476a0>, is_internal = False

    async def wrap_api_call(
        self, cb: Callable[[], Any], is_internal: bool = False
    ) -> Any:
        if self._api_zone.get():
            return await cb()
        task = asyncio.current_task(self._loop)
        st: List[inspect.FrameInfo] = getattr(
            task, "__pw_stack__", inspect.stack())
        parsed_st = _extract_stack_trace_information_from_stack(
            st, is_internal)
        self._api_zone.set(parsed_st)
        try:
            return await cb()
        except Exception as error:
>           raise rewrite_error(
                error, f"{parsed_st['apiName']}: {error}") from None
E           playwright._impl._errors.TimeoutError: Page.goto: Timeout 30000ms exceeded.
E           Call log:
E             - navigating to "https://www.agoda.com/flights/results?departureFrom=LHE&departureFromType=1&arrivalTo=JFK&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Business&adults=2&children=1&sort=8", waiting until "load"

venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:538: TimeoutError
2025-03-14 16:42:10 | INFO     | conftest             | Test failed, capturing screenshot for: test_flight_data
2025-03-14 16:42:10 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_flight_data_20250314_1642.png
2025-03-14 16:42:19 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:42:19 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:42:19 | INFO     | conftest             | Closing page
2025-03-14 16:42:19 | INFO     | conftest             | Closing browser
2025-03-14 16:42:20 | INFO     | conftest             | Launching browser
2025-03-14 16:42:21 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:42:21 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:42:22 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:42:22 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:42:25 | INFO     | FlightOptions        | Checking direct flights
2025-03-14 16:42:25 | INFO     | FlightOptions        | Checking for 'no flights' message
2025-03-14 16:42:35 | WARNING  | BasePage             | Element '//div[@data-testid='no-result-page']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='no-result-page']") to be visible

2025-03-14 16:42:35 | INFO     | FlightOptions        | Flights are available (no 'no flights' message found)
2025-03-14 16:42:35 | INFO     | FlightOptions        | Clicking checkbox: get_direct_stop_checkbox
2025-03-14 16:42:36 | INFO     | FlightOptions        | Clicked checkbox: get_direct_stop_checkbox
2025-03-14 16:42:36 | INFO     | FlightOptions        | Processing flight option: direct
2025-03-14 16:42:41 | WARNING  | BasePage             | Elements '//div[@data-testid='web-refresh-flights-card']' not found. Error: Page.wait_for_selector: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']") to be visible

2025-03-14 16:42:41 | INFO     | FlightOptions        | Number of stops for direct are: 
2025-03-14 16:42:41 | INFO     | FlightOptions        | Direct flights check result: True
2025-03-14 16:42:41 | INFO     | FlightOptions        | Checking one-stop flights
2025-03-14 16:42:41 | INFO     | FlightOptions        | Clicking checkbox: get_one_stop_checkbox
2025-03-14 16:42:41 | INFO     | FlightOptions        | Clicked checkbox: get_one_stop_checkbox
2025-03-14 16:42:41 | INFO     | FlightOptions        | Processing flight option: One Stop
2025-03-14 16:42:43 | INFO     | FlightOptions        | Number of stops for One Stop are: 
2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | 1

2025-03-14 16:42:43 | INFO     | FlightOptions        | One-stop flights check result: True
2025-03-14 16:42:43 | INFO     | conftest             | Test PASSED: test_flight_stops
2025-03-14 16:42:43 | INFO     | conftest             | Test completed: test_flight_stops
2025-03-14 16:42:43 | INFO     | conftest             | Closing page
2025-03-14 16:42:43 | INFO     | conftest             | Closing browser
2025-03-14 16:43:44 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:43:44 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:43:44 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:43:44 | INFO     | conftest             | Loading test parameters from package.json for test_flight_booking
2025-03-14 16:43:44 | INFO     | conftest             | Loaded 2 parameter sets from package.json
2025-03-14 16:43:44 | INFO     | conftest             | Parametrized test_flight_booking with 2 parameter sets
2025-03-14 16:43:44 | INFO     | conftest             | Creating screenshot directory: /Users/zaki.sabir/Downloads/agoda/Reports/Images/
2025-03-14 16:43:44 | INFO     | conftest             | Cleared 3 existing screenshots from directory
2025-03-14 16:43:44 | INFO     | conftest             | Creating search_url fixture
2025-03-14 16:43:44 | INFO     | conftest             | Launching browser
2025-03-14 16:43:46 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:43:46 | INFO     | conftest             | Creating new page for test: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:43:46 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:43:46 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:43:58 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:43:58 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:43:58 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:43:58 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:43:58 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:43:58 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:43:59 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:43:59 | INFO     | RoundTrip            | Selecting departure airport: LHE
2025-03-14 16:43:59 | INFO     | RoundTrip            | Setting and verifying Departure airport: LHE
2025-03-14 16:43:59 | INFO     | RoundTrip            | Departure airport set to: LHE
2025-03-14 16:44:00 | INFO     | RoundTrip            | Selecting airport from options: LHE
2025-03-14 16:44:00 | INFO     | RoundTrip            | Found 13 airport options
2025-03-14 16:44:00 | INFO     | RoundTrip            | Found matching airport: AirportAllama Iqbal International AirportLHE
2025-03-14 16:44:00 | INFO     | RoundTrip            | Selected Departure airport: AirportAllama Iqbal International AirportLHE (Code: LHE)
2025-03-14 16:44:00 | INFO     | RoundTrip            | Actual Departure airport: Lahore (LHE) (Code: LHE)
2025-03-14 16:44:00 | INFO     | RoundTrip            | Departure airport selected: LHE
2025-03-14 16:44:00 | INFO     | RoundTrip            | Selecting arrival airport: JFK
2025-03-14 16:44:00 | INFO     | RoundTrip            | Setting and verifying Arrival airport: JFK
2025-03-14 16:44:00 | INFO     | RoundTrip            | Setting arrival airport to: JFK
2025-03-14 16:44:01 | INFO     | RoundTrip            | Arrival airport set to: JFK
2025-03-14 16:44:02 | INFO     | RoundTrip            | Selecting airport from options: JFK
2025-03-14 16:44:02 | INFO     | RoundTrip            | Found 5 airport options
2025-03-14 16:44:02 | INFO     | RoundTrip            | Found matching airport: AirportJohn F. Kennedy International AirportJFK
2025-03-14 16:44:02 | INFO     | RoundTrip            | Selected Arrival airport: AirportJohn F. Kennedy International AirportJFK (Code: JFK)
2025-03-14 16:44:02 | INFO     | RoundTrip            | Actual Arrival airport: New York (NY) (JFK) (Code: JFK)
2025-03-14 16:44:02 | INFO     | RoundTrip            | Arrival airport selected: JFK
2025-03-14 16:44:02 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:44:02 | INFO     | RoundTrip            | Departure date set to: 2025-04-23
2025-03-14 16:44:02 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:44:12 | WARNING  | BasePage             | Element '//span[@data-selenium-date='2025-05-13']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//span[@data-selenium-date='2025-05-13']") to be visible

2025-03-14 16:44:13 | INFO     | RoundTrip            | Return date set to: 2025-05-13
2025-03-14 16:44:13 | INFO     | RoundTrip            | Checking if departure date is selected
2025-03-14 16:44:13 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:44:13 | INFO     | RoundTrip            | Expected departure date: 2025-04-23, Actual: 2025-04-23
2025-03-14 16:44:13 | INFO     | RoundTrip            | Departure date is correctly selected
2025-03-14 16:44:13 | INFO     | RoundTrip            | Checking if return date is selected
2025-03-14 16:44:13 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:44:13 | INFO     | RoundTrip            | Expected return date: 2025-05-13, Actual: 2025-05-13
2025-03-14 16:44:13 | INFO     | RoundTrip            | Return date is correctly selected
2025-03-14 16:44:13 | INFO     | RoundTrip            | Selecting passengers: Adults=2, Children=1, Infants=0, Cabin=Business
2025-03-14 16:44:13 | INFO     | RoundTrip            | Adjusting adult count to 2
2025-03-14 16:44:13 | INFO     | RoundTrip            | Current adults: 1, Target: 2
2025-03-14 16:44:13 | INFO     | RoundTrip            | Adjusting children count to 1
2025-03-14 16:44:13 | INFO     | RoundTrip            | Current childrens: 0, Target: 1
2025-03-14 16:44:13 | INFO     | RoundTrip            | Adjusting infant count to 0
2025-03-14 16:44:13 | INFO     | RoundTrip            | Current infants: 0, Target: 0
2025-03-14 16:44:13 | INFO     | RoundTrip            | Selecting cabin class: Business
2025-03-14 16:44:13 | INFO     | RoundTrip            | Getting passengers and cabin count
2025-03-14 16:44:14 | INFO     | RoundTrip            | Clicking search button
2025-03-14 16:44:14 | INFO     | RoundTrip            | Search button clicked
2025-03-14 16:44:14 | INFO     | RoundTrip            | Checking if search was successful
2025-03-14 16:44:17 | INFO     | RoundTrip            | Search successful - results found
2025-03-14 16:44:17 | INFO     | conftest             | Test PASSED: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:44:17 | INFO     | conftest             | Test completed: test_flight_booking[LHE-JFK-2-1-0-Business]
2025-03-14 16:44:17 | INFO     | conftest             | Closing page
2025-03-14 16:44:17 | INFO     | conftest             | Closing browser
2025-03-14 16:44:17 | INFO     | conftest             | Launching browser
2025-03-14 16:44:18 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:44:18 | INFO     | conftest             | Creating new page for test: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:44:19 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:44:19 | INFO     | RoundTrip            | RoundTrip page object initialized
2025-03-14 16:44:36 | INFO     | RoundTrip            | Waiting for Agoda image to appear
2025-03-14 16:44:36 | INFO     | RoundTrip            | Agoda image found - website loaded successfully
2025-03-14 16:44:36 | INFO     | RoundTrip            | Clicking on Flights tab
2025-03-14 16:44:36 | INFO     | RoundTrip            | Flights tab clicked
2025-03-14 16:44:36 | INFO     | RoundTrip            | Checking if Flights tab is selected
2025-03-14 16:44:36 | INFO     | RoundTrip            | Selecting round trip option
2025-03-14 16:44:37 | INFO     | RoundTrip            | Round trip option selected
2025-03-14 16:44:37 | INFO     | RoundTrip            | Selecting departure airport: KHI
2025-03-14 16:44:37 | INFO     | RoundTrip            | Setting and verifying Departure airport: KHI
2025-03-14 16:44:37 | INFO     | RoundTrip            | Departure airport set to: KHI
2025-03-14 16:44:38 | INFO     | RoundTrip            | Selecting airport from options: KHI
2025-03-14 16:44:38 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:44:38 | INFO     | RoundTrip            | Found matching airport: AirportJinnah International AirportKHI
2025-03-14 16:44:38 | INFO     | RoundTrip            | Selected Departure airport: AirportJinnah International AirportKHI (Code: KHI)
2025-03-14 16:44:38 | INFO     | RoundTrip            | Actual Departure airport: Karachi (KHI) (Code: KHI)
2025-03-14 16:44:38 | INFO     | RoundTrip            | Departure airport selected: KHI
2025-03-14 16:44:38 | INFO     | RoundTrip            | Selecting arrival airport: IST
2025-03-14 16:44:38 | INFO     | RoundTrip            | Setting and verifying Arrival airport: IST
2025-03-14 16:44:38 | INFO     | RoundTrip            | Setting arrival airport to: IST
2025-03-14 16:44:38 | INFO     | RoundTrip            | Arrival airport set to: IST
2025-03-14 16:44:39 | INFO     | RoundTrip            | Selecting airport from options: IST
2025-03-14 16:44:39 | INFO     | RoundTrip            | Found 12 airport options
2025-03-14 16:44:39 | INFO     | RoundTrip            | Found matching airport: AirportIstanbul AirportIST
2025-03-14 16:44:39 | INFO     | RoundTrip            | Selected Arrival airport: AirportIstanbul AirportIST (Code: IST)
2025-03-14 16:44:39 | INFO     | RoundTrip            | Actual Arrival airport: İstanbul (IST) (Code: IST)
2025-03-14 16:44:39 | INFO     | RoundTrip            | Arrival airport selected: IST
2025-03-14 16:44:39 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:44:39 | INFO     | RoundTrip            | Departure date set to: 2025-04-23
2025-03-14 16:44:39 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:44:49 | WARNING  | BasePage             | Element '//span[@data-selenium-date='2025-05-13']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//span[@data-selenium-date='2025-05-13']") to be visible

2025-03-14 16:44:50 | INFO     | RoundTrip            | Return date set to: 2025-05-13
2025-03-14 16:44:50 | INFO     | RoundTrip            | Checking if departure date is selected
2025-03-14 16:44:50 | INFO     | RoundTrip            | Generated departure date: 2025-04-23
2025-03-14 16:44:50 | INFO     | RoundTrip            | Expected departure date: 2025-04-23, Actual: 2025-04-23
2025-03-14 16:44:50 | INFO     | RoundTrip            | Departure date is correctly selected
2025-03-14 16:44:50 | INFO     | RoundTrip            | Checking if return date is selected
2025-03-14 16:44:50 | INFO     | RoundTrip            | Generated return date: 2025-05-13
2025-03-14 16:44:51 | INFO     | RoundTrip            | Expected return date: 2025-05-13, Actual: 2025-05-13
2025-03-14 16:44:51 | INFO     | RoundTrip            | Return date is correctly selected
2025-03-14 16:44:51 | INFO     | RoundTrip            | Selecting passengers: Adults=1, Children=0, Infants=0, Cabin=Economy
2025-03-14 16:44:51 | INFO     | RoundTrip            | Adjusting adult count to 1
2025-03-14 16:44:51 | INFO     | RoundTrip            | Current adults: 1, Target: 1
2025-03-14 16:44:51 | INFO     | RoundTrip            | Adjusting children count to 0
2025-03-14 16:44:51 | INFO     | RoundTrip            | Current childrens: 0, Target: 0
2025-03-14 16:44:51 | INFO     | RoundTrip            | Adjusting infant count to 0
2025-03-14 16:44:51 | INFO     | RoundTrip            | Current infants: 0, Target: 0
2025-03-14 16:44:51 | INFO     | RoundTrip            | Selecting cabin class: Economy
2025-03-14 16:44:51 | INFO     | RoundTrip            | Getting passengers and cabin count
2025-03-14 16:44:51 | INFO     | RoundTrip            | Clicking search button
2025-03-14 16:44:51 | INFO     | RoundTrip            | Search button clicked
2025-03-14 16:44:51 | INFO     | RoundTrip            | Checking if search was successful
2025-03-14 16:44:54 | INFO     | RoundTrip            | Search successful - results found
2025-03-14 16:44:54 | INFO     | conftest             | Test PASSED: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:44:54 | INFO     | conftest             | Test completed: test_flight_booking[KHI-IST-1-0-0-Economy]
2025-03-14 16:44:54 | INFO     | conftest             | Closing page
2025-03-14 16:44:55 | INFO     | conftest             | Closing browser
2025-03-14 16:44:55 | INFO     | conftest             | Launching browser
2025-03-14 16:44:56 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:44:56 | INFO     | conftest             | Creating new page for test: test_verify_search_results
2025-03-14 16:44:57 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:44:57 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:45:02 | INFO     | FlightOptions        | Validating search parameters
2025-03-14 16:45:02 | INFO     | FlightOptions        | Validating URL: https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8
2025-03-14 16:45:02 | INFO     | FlightOptions        | Extracted from URL:
2025-03-14 16:45:02 | INFO     | FlightOptions        | departureFrom: KHI
2025-03-14 16:45:02 | INFO     | FlightOptions        | arrivalTo: IST
2025-03-14 16:45:02 | INFO     | FlightOptions        | departDate: 2025-04-23
2025-03-14 16:45:02 | INFO     | FlightOptions        | returnDate: 2025-05-13
2025-03-14 16:45:02 | INFO     | FlightOptions        | adults: 1
2025-03-14 16:45:02 | INFO     | FlightOptions        | children: 0
2025-03-14 16:45:02 | INFO     | FlightOptions        | infants: 0
2025-03-14 16:45:02 | INFO     | FlightOptions        | cabinType: Economy
2025-03-14 16:45:02 | INFO     | FlightOptions        | Validating from header
2025-03-14 16:45:03 | INFO     | FlightOptions        | Departure value: 
2025-03-14 16:45:03 | INFO     | FlightOptions        | Arrival value: İstanbul (IST)
2025-03-14 16:45:03 | INFO     | FlightOptions        | Clicked departure calendar button
2025-03-14 16:45:03 | INFO     | FlightOptions        | Departure date: 2025-04-23
2025-03-14 16:45:03 | INFO     | FlightOptions        | Clicked return calendar button
2025-03-14 16:45:05 | INFO     | FlightOptions        | Return date: 2025-05-13
2025-03-14 16:45:05 | INFO     | FlightOptions        | Clicked passenger dropdown
2025-03-14 16:45:05 | INFO     | FlightOptions        | Adults count: 1
2025-03-14 16:45:05 | INFO     | FlightOptions        | Children count: 0
2025-03-14 16:45:05 | INFO     | FlightOptions        | Infants count: 0
2025-03-14 16:45:05 | INFO     | FlightOptions        | Cabin type: Economy
2025-03-14 16:45:05 | INFO     | FlightOptions        | Extracted from Header: ['', 'İstanbul (IST)', '2025-04-23', '2025-05-13', '1', '0', '0', 'Economy']
2025-03-14 16:45:05 | WARNING  | FlightOptions        | URL value 'khi' not found in header value ''
2025-03-14 16:45:05 | ERROR    | conftest             | Test FAILED: test_verify_search_results
2025-03-14 16:45:05 | ERROR    | conftest             | Error: page_tuple = (<Page url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&...valTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'})

    @pytest.mark.asyncio
    async def test_verify_search_results(page_tuple):
        # create an instance of trip options class
        page, get_url = page_tuple
        trip = FlightInfo(page)
        await page.goto(get_url["url"])
>       assert await trip.validate_search(get_url["url"])
E       assert False

tests/test_flight_options.py:14: AssertionError
2025-03-14 16:45:05 | INFO     | conftest             | Test failed, capturing screenshot for: test_verify_search_results
2025-03-14 16:45:05 | INFO     | conftest             | Capturing screenshot to: /Users/zaki.sabir/Downloads/agoda/Reports/Images/test_verify_search_results_20250314_1645.png
2025-03-14 16:45:05 | INFO     | conftest             | Screenshot captured successfully
2025-03-14 16:45:05 | INFO     | conftest             | Adding screenshot to HTML report
2025-03-14 16:45:05 | INFO     | conftest             | Closing page
2025-03-14 16:45:05 | INFO     | conftest             | Closing browser
2025-03-14 16:45:06 | INFO     | conftest             | Launching browser
2025-03-14 16:45:07 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:45:07 | INFO     | conftest             | Creating new page for test: test_flight_data
2025-03-14 16:45:07 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:45:07 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:45:13 | INFO     | FlightOptions        | Collecting flight data
2025-03-14 16:45:13 | INFO     | FlightOptions        | Checking for 'no flights' message
2025-03-14 16:45:23 | WARNING  | BasePage             | Element '//div[@data-testid='no-result-page']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='no-result-page']") to be visible

2025-03-14 16:45:23 | INFO     | FlightOptions        | Flights are available (no 'no flights' message found)
2025-03-14 16:45:25 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").first.locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:45:28 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(1).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:45:30 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(2).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:45:31 | INFO     | test_flight_options  | 
Flight Data (Array):
2025-03-14 16:45:31 | INFO     | test_flight_options  | +---------------------------------+------------+-------------+------------+
| Carrier                         | Duration   | Price       |   Layovers |
+=================================+============+=============+============+
| Pegasus Airlines                | 6h 50m     | 109,273 PKR |          0 |
+---------------------------------+------------+-------------+------------+
| Pakistan International Airlines | 6h 0m      | 156,447 PKR |          0 |
+---------------------------------+------------+-------------+------------+
| Turkish Airlines                | 6h 0m      | 213,915 PKR |          0 |
+---------------------------------+------------+-------------+------------+
| Etihad Airways                  | 9h 50m     | 116,914 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Etihad Airways                  | 26h 55m    | 116,914 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Saudia                          | 9h 50m     | 122,701 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Saudia                          | 10h 0m     | 122,701 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Air Arabia                      | 22h 0m     | 124,115 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Air Arabia                      | 8h 35m     | 124,969 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Air Arabia                      | 16h 10m    | 124,969 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Air Arabia                      | 14h 55m    | 125,885 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Saudia                          | 12h 40m    | 125,890 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Saudia                          | 14h 0m     | 125,890 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Saudia                          | 16h 5m     | 125,890 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Air Arabia                      | 8h 10m     | 126,699 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Air Arabia                      | 22h 30m    | 126,699 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Qatar Airways                   | 10h 20m    | 130,446 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Qatar Airways                   | 10h 30m    | 131,434 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Flydubai                        | 10h 30m    | 128,315 PKR |          1 |
+---------------------------------+------------+-------------+------------+
| Flydubai                        | 14h 30m    | 134,385 PKR |          1 |
+---------------------------------+------------+-------------+------------+
2025-03-14 16:45:31 | INFO     | conftest             | Test PASSED: test_flight_data
2025-03-14 16:45:31 | INFO     | conftest             | Test completed: test_flight_data
2025-03-14 16:45:31 | INFO     | conftest             | Closing page
2025-03-14 16:45:31 | INFO     | conftest             | Closing browser
2025-03-14 16:45:32 | INFO     | conftest             | Launching browser
2025-03-14 16:45:32 | INFO     | conftest             | Browser launched successfully: <Browser type=<BrowserType name=chromium executable_path=/Users/zaki.sabir/Library/Caches/ms-playwright/chromium-1155/chrome-mac/Chromium.app/Contents/MacOS/Chromium> version=133.0.6943.16>
2025-03-14 16:45:32 | INFO     | conftest             | Creating new page for test: test_flight_stops
2025-03-14 16:45:33 | INFO     | conftest             | Page created successfully: <Page url='about:blank'>
2025-03-14 16:45:33 | INFO     | FlightOptions        | FlightInfo page object initialized
2025-03-14 16:45:39 | INFO     | FlightOptions        | Checking direct flights
2025-03-14 16:45:39 | INFO     | FlightOptions        | Checking for 'no flights' message
2025-03-14 16:45:49 | WARNING  | BasePage             | Element '//div[@data-testid='no-result-page']' not found. Error: Page.wait_for_selector: Timeout 10000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='no-result-page']") to be visible

2025-03-14 16:45:49 | INFO     | FlightOptions        | Flights are available (no 'no flights' message found)
2025-03-14 16:45:49 | INFO     | FlightOptions        | Clicking checkbox: get_direct_stop_checkbox
2025-03-14 16:45:49 | INFO     | FlightOptions        | Clicked checkbox: get_direct_stop_checkbox
2025-03-14 16:45:49 | INFO     | FlightOptions        | Processing flight option: direct
2025-03-14 16:45:50 | INFO     | FlightOptions        | Number of stops for direct are: 
2025-03-14 16:45:52 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").first.locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:45:52 | INFO     | FlightOptions        | 0

2025-03-14 16:45:54 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(1).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:45:54 | INFO     | FlightOptions        | 0

2025-03-14 16:45:56 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(2).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:45:56 | INFO     | FlightOptions        | 0

2025-03-14 16:46:01 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=3">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(3) to be visible

2025-03-14 16:46:03 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(3).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:03 | INFO     | FlightOptions        | 0

2025-03-14 16:46:08 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=4">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(4) to be visible

2025-03-14 16:46:10 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(4).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:10 | INFO     | FlightOptions        | 0

2025-03-14 16:46:15 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=5">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(5) to be visible

2025-03-14 16:46:17 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(5).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:17 | INFO     | FlightOptions        | 0

2025-03-14 16:46:22 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=6">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(6) to be visible

2025-03-14 16:46:24 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(6).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:24 | INFO     | FlightOptions        | 0

2025-03-14 16:46:29 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=7">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(7) to be visible

2025-03-14 16:46:31 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(7).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:31 | INFO     | FlightOptions        | 0

2025-03-14 16:46:36 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=8">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(8) to be visible

2025-03-14 16:46:38 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(8).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:38 | INFO     | FlightOptions        | 0

2025-03-14 16:46:43 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=9">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(9) to be visible

2025-03-14 16:46:45 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(9).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:45 | INFO     | FlightOptions        | 0

2025-03-14 16:46:50 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=10">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(10) to be visible

2025-03-14 16:46:52 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(10).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:52 | INFO     | FlightOptions        | 0

2025-03-14 16:46:57 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=11">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(11) to be visible

2025-03-14 16:46:59 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(11).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:46:59 | INFO     | FlightOptions        | 0

2025-03-14 16:47:04 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=12">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(12) to be visible

2025-03-14 16:47:06 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(12).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:06 | INFO     | FlightOptions        | 0

2025-03-14 16:47:11 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=13">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(13) to be visible

2025-03-14 16:47:13 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(13).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:13 | INFO     | FlightOptions        | 0

2025-03-14 16:47:18 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=14">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(14) to be visible

2025-03-14 16:47:20 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(14).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:20 | INFO     | FlightOptions        | 0

2025-03-14 16:47:25 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=15">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(15) to be visible

2025-03-14 16:47:27 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(15).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:27 | INFO     | FlightOptions        | 0

2025-03-14 16:47:32 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=16">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(16) to be visible

2025-03-14 16:47:34 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(16).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:34 | INFO     | FlightOptions        | 0

2025-03-14 16:47:39 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=17">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(17) to be visible

2025-03-14 16:47:41 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(17).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:41 | INFO     | FlightOptions        | 0

2025-03-14 16:47:46 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=18">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(18) to be visible

2025-03-14 16:47:48 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(18).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:48 | INFO     | FlightOptions        | 0

2025-03-14 16:47:53 | WARNING  | BasePage             | Locator '<Locator frame=<Frame name= url='https://www.agoda.com/flights/results?departureFrom=KHI&departureFromType=1&arrivalTo=IST&arrivalToType=1&departDate=2025-04-23&returnDate=2025-05-13&searchType=2&cabinType=Economy&adults=1&sort=8'> selector="//div[@data-testid='web-refresh-flights-card'] >> nth=19">' not found. Error: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(19) to be visible

2025-03-14 16:47:55 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(19).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:55 | INFO     | FlightOptions        | 0

2025-03-14 16:47:55 | INFO     | FlightOptions        | Direct flights check result: True
2025-03-14 16:47:55 | INFO     | FlightOptions        | Checking one-stop flights
2025-03-14 16:47:55 | INFO     | FlightOptions        | Clicking checkbox: get_one_stop_checkbox
2025-03-14 16:47:55 | INFO     | FlightOptions        | Clicked checkbox: get_one_stop_checkbox
2025-03-14 16:47:55 | INFO     | FlightOptions        | Processing flight option: One Stop
2025-03-14 16:47:55 | INFO     | FlightOptions        | Number of stops for One Stop are: 
2025-03-14 16:47:57 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").first.locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:57 | INFO     | FlightOptions        | 0

2025-03-14 16:47:59 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(1).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:47:59 | INFO     | FlightOptions        | 0

2025-03-14 16:48:01 | INFO     | FlightOptions        | Error retrieving layover count: Locator.inner_text: Timeout 2000ms exceeded.
Call log:
  - waiting for locator("//div[@data-testid='web-refresh-flights-card']").nth(2).locator("//span[@class='sc-jsMahE sc-kFuwaP bEtAca fdKTiB']").first

2025-03-14 16:48:01 | INFO     | FlightOptions        | 0

2025-03-14 16:48:01 | INFO     | FlightOptions        | One-stop flights check result: True
2025-03-14 16:48:01 | INFO     | conftest             | Test PASSED: test_flight_stops
2025-03-14 16:48:01 | INFO     | conftest             | Test completed: test_flight_stops
2025-03-14 16:48:01 | INFO     | conftest             | Closing page
2025-03-14 16:48:01 | INFO     | conftest             | Closing browser
2025-03-14 16:52:13 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:52:13 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:52:13 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:52:13 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:52:20 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:52:20 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:52:20 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:52:20 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:52:21 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:52:21 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:52:22 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:52:22 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:52:31 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:52:31 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:52:31 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:52:31 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:52:34 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:52:34 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:52:34 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:52:34 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:53:53 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:53:53 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:53:53 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:53:53 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:53:54 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:53:54 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:53:54 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:53:54 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:54:03 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:54:03 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:54:03 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:54:03 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 16:54:05 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 16:54:05 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 16:54:05 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 16:54:05 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 17:58:48 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 17:58:48 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 17:58:48 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 17:58:48 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 17:58:51 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 17:58:51 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 17:58:51 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 17:58:51 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 17:58:56 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 17:58:56 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 17:58:56 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 17:58:56 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 18:09:32 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 18:09:32 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 18:09:32 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 18:09:32 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 18:09:40 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 18:09:40 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 18:09:40 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 18:09:40 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 18:09:51 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 18:09:51 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 18:09:51 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 18:09:51 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
2025-03-14 18:09:58 | INFO     | conftest             | Logging initialized. Log file: /Users/zaki.sabir/Downloads/agoda/Reports/Logs/20250314.log
2025-03-14 18:09:58 | INFO     | conftest             | Added command-line option: --testParameters
2025-03-14 18:09:58 | INFO     | conftest             | Test session started: /Users/zaki.sabir/Downloads/agoda
2025-03-14 18:09:58 | INFO     | conftest             | Parametrized test_flight_booking with 0 parameter sets
